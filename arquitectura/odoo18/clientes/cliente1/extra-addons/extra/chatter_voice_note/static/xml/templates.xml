<templates id="template" xml:space="preserve">
    <t t-name="chatter_voice_note.VoiceRecorder" owl="1">
        <div class="o_container p-4">
            <h2>üéôÔ∏è Voice Recorder</h2>
            <button t-on-click="toggleRecording"
                    t-att-class="'btn btn-lg ' + (state.recording ? 'btn-warning' : 'btn-primary')">
                <i t-att-class="'fa ' + (state.recording ? 'fa-stop' : 'fa-microphone')"></i>
                <t t-esc="state.recording ? ' Stop Recording' : ' Start Recording'"/>
            </button>

            <div t-if="state.error" class="mt-2 text-danger">
                <t t-esc="state.error"/>
            </div>

            <div class="mt-3">
                <h4>Notas grabadas:</h4>
                <t t-foreach="this.sortedNotes" t-as="note" t-key="note.id">
                    <div class="mb-2 p-2 border rounded d-flex align-items-center justify-content-between">
                        <div class="flex-grow-1 me-3">
                            <strong t-esc="note.name"/>
                            <audio t-att-src="note.url" t-att-controls="true" class="d-block mt-1"></audio>
                            <div t-if="note.uploading" class="text-info">Subiendo...</div>
                            <div t-if="note.error" class="text-danger" t-esc="note.error"></div>
                        </div>

                        <button t-on-click="() => this.deleteNote(note.id)"
                                class="btn btn-sm btn-danger ms-2"
                                aria-label="Eliminar nota">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                </t>
            </div>
         </div>
    </t>
</templates>
